# HW03 – eda-cli: мини-EDA для CSV

Небольшое CLI-приложение для базового **exploratory data analysis (EDA)** CSV-файлов.  
Проект выполнен в рамках **Домашнего задания HW03** курса «Инженерия ИИ»  
и основан на заготовке проекта семинара **S03**.

Приложение позволяет:
- получить краткий обзор датасета;
- посмотреть статистику по колонкам и пропускам;
- оценить качество данных с помощью простых эвристик;
- сгенерировать табличный и визуальный EDA-отчёт.

---

## Требования

- Python **3.11+**
- установленный инструмент **[uv](https://docs.astral.sh/uv/)**

---

## Инициализация проекта

Перейдите в папку проекта (внутри `homeworks/HW03/eda-cli`) и выполните:

```bash
uv sync
```

Команда:

- создаст виртуальное окружение `.venv`;
- установит зависимости из `pyproject.toml`;
- установит CLI-приложение `eda-cli` в окружение.

---

## Запуск CLI

CLI-приложение содержит две основные команды:

- `overview` — краткий обзор датасета;
- `report` — генерация полного EDA-отчёта.

Посмотреть справку по CLI:

```bash
uv run eda-cli --help
```

---

## Команда `overview`

Выводит краткий обзор CSV-файла:

- количество строк и столбцов;
- типы данных;
- число пропусков;
- количество уникальных значений по колонкам.

### Пример запуска

```bash
uv run eda-cli overview data/example.csv
```

### Параметры

- `--sep` — разделитель в CSV (по умолчанию `,`);
- `--encoding` — кодировка файла (по умолчанию `utf-8`).

---

## Команда `report`

Генерирует **полный EDA-отчёт**, включающий таблицы, эвристики качества и визуализации.

### Базовый пример

```bash
uv run eda-cli report data/example.csv --out-dir reports_example
```

---

### Дополнительные параметры команды `report`

| Параметр             | Описание                                                  |
| -------------------- | --------------------------------------------------------- |
| `--out-dir`          | Каталог для сохранения отчёта                             |
| `--max-hist-columns` | Максимальное число числовых колонок для гистограмм        |
| `--top-k-categories` | Сколько top-значений сохранять для категориальных колонок |
| `--title`            | Заголовок Markdown-отчёта                                 |
| `--json-summary`     | Сохранить компактную JSON-сводку датасета                 |

### Пример запуска с дополнительными опциями

```bash
uv run eda-cli report data/example.csv --out-dir reports_example --top-k-categories 3 --title "EDA отчёт по example.csv" --json-summary
```

> В Windows все аргументы команды должны вводиться **в одной строке**.

---

## Что создаётся в каталоге отчёта

После выполнения команды `report` в указанной папке появляются следующие файлы:

- `report.md` — основной отчёт в формате Markdown;
- `summary.csv` — таблица со сводной информацией по колонкам;
- `missing.csv` — статистика пропусков по колонкам;
- `correlation.csv` — корреляционная матрица числовых признаков (если применимо);
- `summary.json` — JSON-сводка датасета (при использовании `--json-summary`);
- `top_categories/*.csv` — top-k значений категориальных признаков;
- `hist_*.png` — гистограммы числовых колонок;
- `missing_matrix.png` — визуализация пропусков;
- `correlation_heatmap.png` — тепловая карта корреляций.

---

## Эвристики качества данных

В рамках HW03 были добавлены дополнительные эвристики качества данных, включая:

- слишком малое количество строк;
- слишком большое количество колонок;
- высокая доля пропусков;
- наличие константных колонок;
- подозрительно большое количество нулевых значений в числовых признаках.

На основе этих эвристик рассчитывается интегральный показатель
**`quality_score`** в диапазоне от 0 до 1.

---

## Тесты

Проект покрыт минимальными тестами для проверки логики анализа данных.

Запуск тестов:

```bash
uv run pytest -q
```
